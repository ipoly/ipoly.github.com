// Generated by CoffeeScript 1.6.1
(function() {

  $(function() {
    var callback, container, id, para, tpl;
    container = $("[data-douban]");
    id = container.data("douban");
    if (!id) {
      return;
    }
    para = {
      alt: "xd",
      apikey: "0a450ab03fde0d441ecf2010bf9a27cc"
    };
    tpl = "<div class=\"alert alert-info\">\n<div class=\"row show-grid doubanIntro\">\n  <div class=\"span\">\n    <a href=\"${link[1]['@href']}\"><img src=\"${link[2]['@href']}\" alt=\"image\"></a>\n  </div>\n  <div class=\"span6 bookinfo\">\n    <span class=\"label label-important\">\n        ${_['db:attribute'].title} - ${_['db:attribute'].subtitle}\n    </span>\n    <p>${_['db:attribute']['author-intro']}</p>\n  </div>\n</div>\n</div>";
    callback = function(data) {
      var dataObj, doubanIntro, i, _i, _len, _ref;
      dataObj = {};
      _ref = data["db:attribute"];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        i = _ref[_i];
        dataObj[i['@name']] = i.$t;
      }
      data["db:attribute"] = dataObj;
      doubanIntro = $(juicer(tpl, data));
      doubanIntro.hide();
      container.prepend(doubanIntro);
      return $(window).load(function() {
        return doubanIntro.show("normal");
      });
    };
    return $.getJSON("http://api.douban.com/book/subject/" + id + "?callback=?", para, callback);
  });

}).call(this);
